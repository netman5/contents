# Transactions In RDMS  
![[DBMS-Transaction-Processing.jpg.jpeg]]  
Image courtesy of educba

## What is Database Transaction?

Well as the name suggests, it is performing an operation either by adding, updating, or removing from a database. Take, for example, a transaction occurring from your bank account ğŸ˜‰ï¸, it is either you perform a credit transaction where you add or receive money into your account or you make a debit transaction which results in updating the current balance.

If you understand the above explanation then it would be easy to grab what a DB transaction is.

Database Transaction can be defined as sets or units of tasks performed at a single point in time against a database that is independent of other transactions. In a nutshell database transaction is any change in the database. Click [here]([https://www.guru99.com/dbms-transaction-management.html](https://www.guru99.com/dbms-transaction-management.html)) to read more

It is said that all transaction or database access that starts with the word **Begin** and **End** transaction statement is considered a single logical transaction in DBMS.

A transaction may or may not change the state of a database, a successful transaction may change the current state of the database from a consistent state to another. In the situation of a failed transaction, the state of the database remains the same. That is it makes no changes to the state of the database.

In a situation where the transaction does not update the state of the database, for instance when retrieving data, this type of transaction is referred to as a read-only transaction.

For example when querying to list all records from a table

`SELECT * FROM tablename;`

## The acronym ACID  
The above acronym was formed purposely for conformity and maintaining of data & database integrity during & after the transaction process. According to [database guide](https://database.guide/sql-transactions-tutorial/%29it) it refers to it as a set of properties that guarantee database transactions are processed reliably. ACID is also concerned with how a database recovers from any failure that might occur during transactions.

Let us look into the meaning of each letter of the ACID

### Atomicity  
This guarantees that either all the transactions succeed or none of it does. What this is saying in essence is that if a part of the transaction fails the whole transaction fails. You donâ€™t get some parts of transactions to succeed and others parts to fail. Atomicity cares about either success or nothing.

### Consistency  
A transaction can only change the state of the database from a valid one to another valid state maintaining the predefined rules which include Constraint, Cascade, etc. that have been applied to the database. Consistency guarantees that all data will be consistent.

### Isolation  
This guarantees that all transactions exist in their own world, that is, each transaction is in complete isolation from others. No two transactions taking place at the same time will ever see the change of the other one. A transaction cannot read data from any other transaction that is yet to be completed.

### Durability  
This guarantees the reliability of the data once a successful transaction has taken place. It means once a transaction is committed, it persisted on the system or server whichever one even in the wake of a hardware failure or system crash. A successful transaction or change must be recoverable and stored permanently in the system.

Let us quickly see a transaction in effect, Iâ€™ll be using PostgreSQL to demonstrate how a transaction is performed.

Since I started with an example of a bank transaction, we might as well just stick to it for the practical example.

We will:  
- START TRANSACTION  
- Debit account 2  
- Credit account 1  
- COMMIT TRANSACTION

First let us create the account table

```  
DROP TABLE IF EXISTS accounts;  
CREATE TABLE accounts (  
Â id INT GENERATED BY DEFAULT AS IDENTITY,  
Â name VARCHAR(100) NOT NULL,  
Â balance DEC(15,2) NOT NULL,  
Â PRIMARY KEY(id)  
);  
```

We can start a transaction by inserting data into our account table using `BEGIN TRANSACTION;` or `BEGIN WORK` or just `BEGIN` keyword and commit the transaction by using either `COMMIT TRANSACTION;` or `COMMIT WORK;` or my favorite `COMMIT` command.

Let's insert into the table the internet's most famous duo

```  
â€Šâ€”â€Šstart a transaction  
BEGIN;

â€Šâ€”â€Šinsert a new row into the accounts table  
INSERT INTO accounts(name,balance)  
VALUES(â€˜Jane Doeâ€™,10000);

INSERT INTO accounts(name,balance)  
VALUES(â€˜John Doeâ€™,30000);

â€Šâ€”â€Šcommit the change (or roll it back later)  
COMMIT;  
```

Let's check the accounts table for the new entries `SELECT * FROM accounts;`  
![[account_details.png]]  
Then letâ€™s transfer $5000 from Johnâ€™s account to Jane but we will be performing the transactions using two sessions

```  
BEGIN;

UPDATE accountsÂ   
SET balance = balanceâ€Šâ€”â€Š5000  
WHERE id = 2;  
```

Letâ€™s check both account balance

```  
SELECTÂ   
Â id,  
Â name,  
Â balance  
FROMÂ   
Â accounts;  
```

As we can see from the screenshot below that John's account has been debitedÂ   
![[balance.png]]

Letâ€™s credit lucky Jane and commit  
```  
UPDATE accounts  
SET balance = balance + 5000  
WHERE id = 1;Â   
```

```  
COMMIT  
```

![[balance_after.png]]  
Putting it all together  
```  
â€Šâ€”â€Šstart a transaction  
BEGIN;

â€Šâ€”â€Šdeduct 5000 from account 2  
UPDATE accountsÂ   
SET balance = balanceâ€Šâ€”â€Š5000  
WHERE id = 2;

â€Šâ€”â€Šadd 5000 to account 1  
UPDATE accounts  
SET balance = balance + 5000  
WHERE id = 1;

â€Šâ€”â€Šselect the data from accounts  
SELECT id, name, balance  
FROM accounts;

â€Šâ€”â€Šcommit the transaction  
COMMIT;  
```

A transaction can be rollback using `ROLLBACK`.

And there you have it.Â 

If you like my content you can connect with me here on [LinkedIn]([https://www.linkedin.com/in/ola-ishola/](https://www.linkedin.com/in/ola-ishola/)) and [Twitter]([https://twitter.com/Orlaish](https://twitter.com/Orlaish))

Thanks for reading.